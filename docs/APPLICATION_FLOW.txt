╔════════════════════════════════════════════════════════════════════════════════╗
║                    JobXchange - APPLICATION FLOW                               ║
╚════════════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────────┐
│                          AUTHENTICATION FLOW                                 │
└─────────────────────────────────────────────────────────────────────────────┘

1. NEW USER REGISTRATION
   signup.php → handle_signup.php → [Database: Insert User] → login.php
   
   User selects role: Candidate OR Recruiter
   (Admin is pre-created in database)

2. USER LOGIN
   login.php → handle_login.php → [Check Credentials] → Role-based redirect:
   
   ├─→ Admin     → dashboard_admin.php
   ├─→ Recruiter → dashboard_recruiter.php
   └─→ Candidate → dashboard_candidate.php


┌─────────────────────────────────────────────────────────────────────────────┐
│                          RECRUITER WORKFLOW                                  │
└─────────────────────────────────────────────────────────────────────────────┘

1. POST A JOB
   dashboard_recruiter.php → [Click "Post New Job"]
   → post_job.php → handle_post_job.php
   → [Insert job with status="pending"] → dashboard_recruiter.php

2. VIEW POSTED JOBS
   dashboard_recruiter.php → [Shows all jobs posted by recruiter]
   → Each job shows: Title, Status (pending/approved/rejected), Applicant count

3. VIEW APPLICANTS
   dashboard_recruiter.php → [Click "View Applicants"]
   → view_applicants.php → [Shows all candidates who applied]
   → Displays: Name, Email, Message, Applied Date, Status


┌─────────────────────────────────────────────────────────────────────────────┐
│                          CANDIDATE WORKFLOW                                  │
└─────────────────────────────────────────────────────────────────────────────┘

1. VIEW AVAILABLE JOBS
   dashboard_candidate.php → [Shows only APPROVED jobs]
   → Jobs displayed in card format with full details

2. APPLY FOR JOB
   dashboard_candidate.php → [Click "Apply Now"]
   → apply_job.php → [Enter cover letter/message]
   → handle_apply.php → [Insert application] → dashboard_candidate.php

3. TRACK APPLICATIONS
   dashboard_candidate.php → [Shows "My Applications" section]
   → Displays: Job Title, Type, Recruiter, Applied Date, Status


┌─────────────────────────────────────────────────────────────────────────────┐
│                            ADMIN WORKFLOW                                    │
└─────────────────────────────────────────────────────────────────────────────┘

1. VIEW DASHBOARD
   dashboard_admin.php → Shows statistics:
   - Total Users
   - Total Jobs
   - Pending Approvals
   - Total Applications

2. APPROVE/REJECT JOBS
   dashboard_admin.php → [Pending Job Approvals section]
   → Click "Approve" or "Reject" → handle_approve.php
   → [Update job status] → dashboard_admin.php
   
   Only APPROVED jobs are visible to candidates!

3. MANAGE JOBS
   dashboard_admin.php → [All Jobs section]
   → Click "Delete" → handle_delete_job.php
   → [Delete job and all related applications] → dashboard_admin.php

4. MANAGE USERS
   dashboard_admin.php → [All Users section]
   → Click "Delete" → handle_delete_user.php
   → [Delete user and all related data] → dashboard_admin.php


┌─────────────────────────────────────────────────────────────────────────────┐
│                          DATABASE RELATIONSHIPS                              │
└─────────────────────────────────────────────────────────────────────────────┘

USERS Table
  ├─→ (recruiter_id) → JOBS Table
  │                      └─→ (job_id) → APPLICATIONS Table
  └─→ (user_id) → APPLICATIONS Table

Cascade Delete Rules:
- Delete User → Deletes all their Jobs → Deletes all Applications for those jobs
- Delete Job → Deletes all Applications for that job
- Unique constraint: One user can apply to same job only once


┌─────────────────────────────────────────────────────────────────────────────┐
│                            JOB STATUS FLOW                                   │
└─────────────────────────────────────────────────────────────────────────────┘

PENDING (default when recruiter posts)
   ↓
Admin reviews in dashboard
   ↓
   ├─→ APPROVED (visible to candidates, can receive applications)
   └─→ REJECTED (not visible to candidates)


┌─────────────────────────────────────────────────────────────────────────────┐
│                        APPLICATION STATUS FLOW                               │
└─────────────────────────────────────────────────────────────────────────────┘

PENDING (default when candidate applies)
   ↓
Recruiter can view in "View Applicants" page
(Note: Status management can be enhanced in future versions)


┌─────────────────────────────────────────────────────────────────────────────┐
│                            KEY FEATURES                                      │
└─────────────────────────────────────────────────────────────────────────────┘

✓ Session-based authentication with role checking
✓ Password hashing (bcrypt via password_hash)
✓ SQL injection prevention (mysqli_real_escape_string)
✓ Role-based access control (admin/recruiter/candidate)
✓ Foreign key constraints for data integrity
✓ Cascade delete to maintain consistency
✓ Unique constraints (email, job application per user)
✓ Responsive UI with modern design
✓ Status badges for visual feedback
✓ Form validation (client & server side)


┌─────────────────────────────────────────────────────────────────────────────┐
│                            PAGE ACCESS MATRIX                                │
└─────────────────────────────────────────────────────────────────────────────┘

Page                        │ Admin │ Recruiter │ Candidate │ Guest
─────────────────────────────┼───────┼───────────┼───────────┼──────
signup.php                   │   ✗   │     ✗     │     ✗     │  ✓
login.php                    │   ✗   │     ✗     │     ✗     │  ✓
dashboard_admin.php          │   ✓   │     ✗     │     ✗     │  ✗
dashboard_recruiter.php      │   ✗   │     ✓     │     ✗     │  ✗
dashboard_candidate.php      │   ✗   │     ✗     │     ✓     │  ✗
post_job.php                 │   ✗   │     ✓     │     ✗     │  ✗
apply_job.php                │   ✗   │     ✗     │     ✓     │  ✗
view_applicants.php          │   ✗   │     ✓     │     ✗     │  ✗


┌─────────────────────────────────────────────────────────────────────────────┐
│                         TESTING WORKFLOW                                     │
└─────────────────────────────────────────────────────────────────────────────┘

1. Login as ADMIN (admin@jobxchange.com / admin123)
   - Verify dashboard loads with statistics

2. Sign up as RECRUITER (signup.php)
   - Create account with recruiter role
   - Login and post a new job
   - Verify job shows as "pending"

3. Back to ADMIN account
   - View pending jobs
   - Approve the job posted by recruiter
   - Verify job status changes to "approved"

4. Sign up as CANDIDATE (signup.php)
   - Create account with candidate role
   - Login and verify approved job is visible
   - Apply for the job with a message
   - Verify application appears in "My Applications"

5. Back to RECRUITER account
   - Click "View Applicants" for the job
   - Verify candidate's application is visible with details

6. Back to ADMIN account
   - Test deleting a user
   - Test deleting a job
   - Verify cascade deletes work properly


═══════════════════════════════════════════════════════════════════════════════
                              END OF FLOW DOCUMENT
═══════════════════════════════════════════════════════════════════════════════

